"use strict";(self.webpackChunkstellar_account_viewer_v2=self.webpackChunkstellar_account_viewer_v2||[]).push([[544],{50291:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(55360),o=n(88947),i=n.n(o),s=n(62802),a=n(48287).Buffer;function c(e){const t=[];return e.split("/").forEach((e=>{let n=parseInt(e,10);isNaN(n)||(e.length>1&&"'"===e[e.length-1]&&(n+=2147483648),t.push(n))})),t}function d(e,t){function n(e,r,o){return e>=r.length?o:t(r[e],e).then((function(t){return o.push(t),n(e+1,r,o)}))}return Promise.resolve().then((()=>n(0,e,[])))}function u(e){const t=new s.sha256;return t.update(e,"utf8"),t.digest()}function l(e){e.split("/").forEach((function(e){if(!e.toString().endsWith("'"))throw new Error("Detected a non-hardened path element in requested BIP32 path. Non-hardended paths are not supported at this time. Please use an all-hardened path. Example: 44'/148'/0'")}))}var h=n(48287).Buffer;const p=224,g=36864,E=27013,T=28162;class I{constructor(e,t="l0v"){this.transport=e,e.decorateAppAPIMethods(this,["getAppConfiguration","getPublicKey","signTransaction","signHash"],t)}getAppConfiguration(){return this.transport.send(p,6,0,0).then((e=>{const t=1===e[0]||e[1]<2;return{version:e[1]+"."+e[2]+"."+e[3],multiOpsEnabled:t}}))}getPublicKey(e,t,n){l(e);const o=[];let s;const u=c(e),E=h.alloc(1+4*u.length);E[0]=u.length,u.forEach(((e,t)=>{E.writeUInt32BE(e,1+4*t)}));const I=h.from("via lumina","ascii");o.push(h.concat([E,I]));let v=!1;return d(o,(e=>this.transport.send(p,v?16:2,t?1:0,n?1:0,e,[g,T]).then((e=>{h.from(e.slice(e.length-2)).readUInt16BE(0)===T&&(v=!0,o.push(h.alloc(0))),s=e})))).then((()=>{let e=0;const n=s.slice(e,e+32);e+=32;const o=function(e){const t=a.from(e),n=a.from([48]),o=a.concat([n,t]),i=a.alloc(2);i.writeUInt16LE(function(e,t){let n=0;for(let t=0;t<e.length;t++){let r=n>>>8&255;r^=255&e[t],r^=r>>>4,n=n<<8&65535,n^=r,r=r<<5&65535,n^=r,r=r<<7&65535,n^=r}return n}(o),0);const s=a.concat([o,i]);return r.encode(s)}(n);if(t){const t=s.slice(e,e+64);if(!function(e,t,n){return i().sign.detached.verify(new Uint8Array(e.toJSON().data),new Uint8Array(t.toJSON().data),new Uint8Array(n.toJSON().data))}(I,t,n))throw new Error("Bad signature. Keypair is invalid. Please report this.")}return{publicKey:o,raw:n}}))}signTransaction(e,t){if(l(e),t.length>1540)throw new Error("Transaction too large: max = 1540; actual = "+t.length);const n=[];let r;const o=c(e),i=1+4*o.length,s=h.alloc(i);s[0]=o.length,o.forEach((function(e,t){s.writeUInt32BE(e,1+4*t)}));let a=150-i;if(t.length<=a)n.push(h.concat([s,t]));else{let e=h.alloc(a),r=0;for(t.copy(e,0,r,a),n.push(h.concat([s,e])),r+=a;r<t.length;){const o=t.length-r;a=o<150?o:150,e=h.alloc(a),t.copy(e,0,r,r+a),r+=a,n.push(e)}}let I=!1;return d(n,((e,t)=>this.transport.send(p,I?16:4,0===t?0:128,t===n.length-1?0:128,e,[g,E,27684,27685,T]).then((e=>{h.from(e.slice(e.length-2)).readUInt16BE(0)===T&&(I=!0,n.push(h.alloc(0))),r=e})))).then((()=>{const n=h.from(r.slice(r.length-2)).readUInt16BE(0);if(n===g)return{signature:h.from(r.slice(0,r.length-2))};if(27684===n)return this.signHash_private(e,u(t));if(27685===n)return this.signHash_private(e,u(t));throw new Error("Transaction approval request was rejected")}))}signHash(e,t){return l(e),this.signHash_private(e,t)}signHash_private(e,t){const n=[];let r;const o=c(e),i=h.alloc(1+4*o.length);i[0]=o.length,o.forEach((function(e,t){i.writeUInt32BE(e,1+4*t)})),n.push(h.concat([i,t]));let s=!1;return d(n,(e=>this.transport.send(p,s?16:8,0,0,e,[g,E,27750,27904,T]).then((e=>{h.from(e.slice(e.length-2)).readUInt16BE(0)===T&&(s=!0,n.push(h.alloc(0))),r=e})))).then((()=>{const e=h.from(r.slice(r.length-2)).readUInt16BE(0);if(e===g)return{signature:h.from(r.slice(0,r.length-2))};throw e===E?new Error("Transaction approval request was rejected"):27904===e?new Error("Hash signing is not supported"):new Error("Hash signing not allowed. Have you enabled it in the app settings?")}))}}},61261:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(27493),o=n(37007),i=n.n(o),s={},a={},c=function(e,t){a[e]=t},d=function(e){var t=function(t,n){Object.assign(this,n),this.name=e,this.message=t||e,this.stack=(new Error).stack};return t.prototype=new Error,s[e]=t,t};d("AccountNameRequired"),d("AccountNotSupported"),d("AmountRequired"),d("BluetoothRequired"),d("BtcUnmatchedApp"),d("CantOpenDevice"),d("CashAddrNotSupported"),d("CurrencyNotSupported"),d("DeviceAppVerifyNotSupported"),d("DeviceGenuineSocketEarlyClose"),d("DeviceNotGenuine"),d("DeviceOnDashboardExpected"),d("DeviceOnDashboardUnexpected"),d("DeviceInOSUExpected"),d("DeviceHalted"),d("DeviceNameInvalid"),d("DeviceSocketFail"),d("DeviceSocketNoBulkStatus"),d("DisconnectedDevice"),d("DisconnectedDeviceDuringOperation"),d("EnpointConfig"),d("EthAppPleaseEnableContractData"),d("FeeEstimationFailed"),d("FirmwareNotRecognized"),d("HardResetFail"),d("InvalidXRPTag"),d("InvalidAddress"),d("InvalidAddressBecauseDestinationIsAlsoSource"),d("LatestMCUInstalledError"),d("UnknownMCU"),d("LedgerAPIError"),d("LedgerAPIErrorWithMessage"),d("LedgerAPINotAvailable"),d("ManagerAppAlreadyInstalled"),d("ManagerAppRelyOnBTC"),d("ManagerAppDepInstallRequired"),d("ManagerAppDepUninstallRequired"),d("ManagerDeviceLocked"),d("ManagerFirmwareNotEnoughSpace"),d("ManagerNotEnoughSpace"),d("ManagerUninstallBTCDep"),d("NetworkDown"),d("NoAddressesFound"),d("NotEnoughBalance"),d("NotEnoughBalanceToDelegate"),d("NotEnoughBalanceInParentAccount"),d("NotEnoughSpendableBalance"),d("NotEnoughBalanceBecauseDestinationNotCreated"),d("NoAccessToCamera"),d("NotEnoughGas"),d("NotSupportedLegacyAddress"),d("GasLessThanEstimate"),d("PasswordsDontMatch"),d("PasswordIncorrect"),d("RecommendSubAccountsToEmpty"),d("RecommendUndelegation"),d("TimeoutTagged"),d("UnexpectedBootloader"),d("MCUNotGenuineToDashboard"),d("RecipientRequired"),d("UnavailableTezosOriginatedAccountReceive"),d("UnavailableTezosOriginatedAccountSend"),d("UpdateFetchFileFail"),d("UpdateIncorrectHash"),d("UpdateIncorrectSig"),d("UpdateYourApp"),d("UserRefusedDeviceNameChange"),d("UserRefusedAddress"),d("UserRefusedFirmwareUpdate"),d("UserRefusedAllowManager"),d("UserRefusedOnDevice"),d("TransportOpenUserCancelled"),d("TransportInterfaceNotAvailable");var u=d("TransportRaceCondition");function l(e,t){this.name="TransportError",this.message=e,this.stack=(new Error).stack,this.id=t}d("TransportWebUSBGestureRequired"),d("DeviceShouldStayInApp"),d("WebsocketConnectionError"),d("WebsocketConnectionFailed"),d("WrongDeviceForAccount"),d("WrongAppForCurrency"),d("ETHAddressNonEIP"),d("CantScanQRCode"),d("FeeNotLoaded"),d("FeeRequired"),d("FeeTooHigh"),d("SyncError"),d("PairingFailed"),d("GenuineCheckFailed"),d("LedgerAPI4xx"),d("LedgerAPI5xx"),d("FirmwareOrAppUpdateRequired"),d("NoDBPathGiven"),d("DBWrongPassword"),d("DBNotReset"),l.prototype=new Error,c("TransportError",(function(e){return new l(e.message,e.id)}));var h={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function p(e){this.name="TransportStatusError";var t=Object.keys(h).find((function(t){return h[t]===e}))||"UNKNOWN_ERROR",n=function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||t,r=e.toString(16);this.message="Ledger device: "+n+" (0x"+r+")",this.stack=(new Error).stack,this.statusCode=e,this.statusText=t}p.prototype=new Error,c("TransportStatusError",(function(e){return new p(e.statusCode)}));var g=n(48287).Buffer;class E{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(i()),this.send=async(e,t,n,r,o=g.alloc(0),i=[h.OK])=>{if(o.length>=256)throw new l("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");const s=await this.exchange(g.concat([g.from([e,t,n,r]),g.from([o.length]),o])),a=s.readUInt16BE(s.length-2);if(!i.some((e=>e===a)))throw new p(a);return s},this.exchangeBusyPromise=void 0,this.exchangeAtomicImpl=async e=>{if(this.exchangeBusyPromise)throw new u("An action was already pending on the Ledger device. Please deny or reconnect.");let t;const n=new Promise((e=>{t=e}));this.exchangeBusyPromise=n;let r=!1;const o=setTimeout((()=>{r=!0,this.emit("unresponsive")}),this.unresponsiveTimeout);try{const t=await e();return r&&this.emit("responsive"),t}finally{clearTimeout(o),t&&t(),this.exchangeBusyPromise=null}},this._appAPIlock=null}exchange(e){throw new Error("exchange not implemented")}setScrambleKey(e){}close(){return Promise.resolve()}on(e,t){this._events.on(e,t)}off(e,t){this._events.removeListener(e,t)}emit(e,...t){this._events.emit(e,...t)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,t){return new Promise(((n,r)=>{let o=!1;const i=this.listen({next:t=>{o=!0,i&&i.unsubscribe(),s&&clearTimeout(s),this.open(t.descriptor,e).then(n,r)},error:e=>{s&&clearTimeout(s),r(e)},complete:()=>{s&&clearTimeout(s),o||r(new l(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),s=t?setTimeout((()=>{i.unsubscribe(),r(new l(this.ErrorMessage_ListenTimeout,"ListenTimeout"))}),t):null}))}decorateAppAPIMethods(e,t,n){for(let r of t)e[r]=this.decorateAppAPIMethod(r,e[r],e,n)}decorateAppAPIMethod(e,t,n,r){return async(...o)=>{const{_appAPIlock:i}=this;if(i)return Promise.reject(new l("Ledger Device is busy (lock "+i+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(r),await t.apply(n,o)}finally{this._appAPIlock=null}}}}E.isSupported=void 0,E.list=void 0,E.listen=void 0,E.open=void 0,E.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",E.ErrorMessage_NoDeviceFound="No Ledger device found";let T=0;const I=[],v=(e,t,n)=>{const r={type:e,id:String(++T),date:new Date};t&&(r.message=t),n&&(r.data=n),function(e){for(let t=0;t<I.length;t++)try{I[t](e)}catch(e){console.error(e)}}(r)};"undefined"!=typeof window&&(window.__ledgerLogsListen=e=>(I.push(e),()=>{const t=I.indexOf(e);-1!==t&&(I[t]=I[I.length-1],I.pop())}));var N=n(48287).Buffer;const m=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");let D=[];class f extends E{static async open(e,t=5e3){return new f}constructor(){super(),this.scrambleKey=void 0,this.unwrap=!0,D.push(this)}async exchange(e){try{return await function(e,t,n,o){const i=function(e,t){const n=N.alloc(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r%t.length];return n}(e,n),s=N.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),a={version:"U2F_V2",keyHandle:m(i.toString("base64")),challenge:m(s.toString("base64")),appId:location.origin};return v("apdu","=> "+e.toString("hex")),(0,r.sign)(a,t/1e3).then((e=>{const{signatureData:t}=e;if("string"==typeof t){const e=N.from((n=t).replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*n.length%4),"base64");let r;return r=o?e.slice(5):e,v("apdu","<= "+r.toString("hex")),r}throw e;var n}))}(e,this.exchangeTimeout,this.scrambleKey,this.unwrap)}catch(e){throw"object"==typeof e.metaData?(5===e.metaData.code&&(D.forEach((e=>e.emit("disconnect"))),D=[]),function(e,t,n){const r=new l(t,n);return r.originalError=e,r}(e,"Failed to sign with Ledger device: U2F "+e.metaData.type,"U2F_"+e.metaData.code)):e}}setScrambleKey(e){this.scrambleKey=N.from(e,"ascii")}setUnwrap(e){this.unwrap=e}close(){return Promise.resolve()}}f.isSupported=r.isSupported,f.list=()=>(0,r.isSupported)().then((e=>e?[null]:[])),f.listen=e=>{let t=!1;return(0,r.isSupported)().then((n=>{t||(n?(e.next({type:"add",descriptor:null}),e.complete()):e.error(new l("U2F browser support is needed for Ledger. Please use Chrome, Opera or Firefox with a U2F extension. Also make sure you're on an HTTPS connection","U2FNotSupported")))})),{unsubscribe:()=>{t=!0}}}},396:(e,t,n)=>{n.d(t,{A:()=>ne});var r=n(37007),o=n.n(r);const i={},s={},a=(e,t)=>{s[e]=t},c=e=>{class t extends Error{constructor(n,r,o){if(super(n||e,o),Object.setPrototypeOf(this,t.prototype),this.name=e,r)for(const e in r)this[e]=r[e];if(o&&"object"==typeof o&&"cause"in o&&!("cause"in this)){const e=o.cause;this.cause=e,"stack"in e&&(this.stack=this.stack+"\nCAUSE: "+e.stack)}}}return i[e]=t,t};c("AccountNameRequired"),c("AccountNotSupported"),c("AmountRequired"),c("BluetoothRequired"),c("BtcUnmatchedApp"),c("CantOpenDevice"),c("CashAddrNotSupported"),c("ClaimRewardsFeesWarning"),c("CurrencyNotSupported"),c("DeviceAppVerifyNotSupported"),c("DeviceGenuineSocketEarlyClose"),c("DeviceNotGenuine"),c("DeviceOnDashboardExpected"),c("DeviceOnDashboardUnexpected"),c("DeviceInOSUExpected"),c("DeviceHalted"),c("DeviceNameInvalid"),c("DeviceSocketFail"),c("DeviceSocketNoBulkStatus"),c("DeviceSocketNoBulkStatus"),c("UnresponsiveDeviceError");const d=c("DisconnectedDevice"),u=c("DisconnectedDeviceDuringOperation"),l=(c("DeviceExtractOnboardingStateError"),c("DeviceOnboardingStatePollingError"),c("EnpointConfig"),c("EthAppPleaseEnableContractData"),c("FeeEstimationFailed"),c("FirmwareNotRecognized"),c("HardResetFail"),c("InvalidXRPTag"),c("InvalidAddress"),c("InvalidNonce"),c("InvalidAddressBecauseDestinationIsAlsoSource"),c("LatestMCUInstalledError"),c("UnknownMCU"),c("LedgerAPIError"),c("LedgerAPIErrorWithMessage"),c("LedgerAPINotAvailable"),c("ManagerAppAlreadyInstalled"),c("ManagerAppRelyOnBTC"),c("ManagerAppDepInstallRequired"),c("ManagerAppDepUninstallRequired"),c("ManagerDeviceLocked"),c("ManagerFirmwareNotEnoughSpace"),c("ManagerNotEnoughSpace"),c("ManagerUninstallBTCDep"),c("NetworkDown"),c("NetworkError"),c("NoAddressesFound"),c("NotEnoughBalance"),c("NotEnoughBalanceToDelegate"),c("NotEnoughBalanceInParentAccount"),c("NotEnoughSpendableBalance"),c("NotEnoughBalanceBecauseDestinationNotCreated"),c("NoAccessToCamera"),c("NotEnoughGas"),c("NotEnoughGasSwap"),c("NotSupportedLegacyAddress"),c("GasLessThanEstimate"),c("PriorityFeeTooLow"),c("PriorityFeeTooHigh"),c("PriorityFeeHigherThanMaxFee"),c("MaxFeeTooLow"),c("PasswordsDontMatch"),c("PasswordIncorrect"),c("RecommendSubAccountsToEmpty"),c("RecommendUndelegation"),c("TimeoutTagged"),c("UnexpectedBootloader"),c("MCUNotGenuineToDashboard"),c("RecipientRequired"),c("UnavailableTezosOriginatedAccountReceive"),c("UnavailableTezosOriginatedAccountSend"),c("UpdateFetchFileFail"),c("UpdateIncorrectHash"),c("UpdateIncorrectSig"),c("UpdateYourApp"),c("UserRefusedDeviceNameChange"),c("UserRefusedAddress"),c("UserRefusedFirmwareUpdate"),c("UserRefusedAllowManager"),c("UserRefusedOnDevice"),c("ExpertModeRequired"),c("TransportOpenUserCancelled")),h=c("TransportInterfaceNotAvailable"),p=c("TransportRaceCondition"),g=c("TransportWebUSBGestureRequired");var E;c("TransactionHasBeenValidatedError"),c("TransportExchangeTimeoutError"),c("DeviceShouldStayInApp"),c("WebsocketConnectionError"),c("WebsocketConnectionFailed"),c("WrongDeviceForAccount"),c("WrongAppForCurrency"),c("ETHAddressNonEIP"),c("CantScanQRCode"),c("FeeNotLoaded"),c("FeeNotLoadedSwap"),c("FeeRequired"),c("FeeTooHigh"),c("PendingOperation"),c("SyncError"),c("PairingFailed"),c("PeerRemovedPairing"),c("GenuineCheckFailed"),c("LedgerAPI4xx"),c("LedgerAPI5xx"),c("FirmwareOrAppUpdateRequired"),c("ReplacementTransactionUnderpriced"),c("OpReturnSizeLimit"),c("DustLimit"),c("LanguageNotFound"),c("NoDBPathGiven"),c("DBWrongPassword"),c("DBNotReset"),function(e){e.Unknown="Unknown",e.LocationServicesDisabled="LocationServicesDisabled",e.LocationServicesUnauthorized="LocationServicesUnauthorized",e.BluetoothScanStartFailed="BluetoothScanStartFailed"}(E||(E={})),Error;class T extends Error{constructor(e,t){const n="TransportError";super(e||n),this.name=n,this.message=e,this.stack=new Error(e).stack,this.id=t}}a("TransportError",(e=>new T(e.message,e.id)));const I={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};class v extends Error{constructor(e,{canBeMappedToChildError:t=!0}={}){const n=Object.keys(I).find((t=>I[t]===e))||"UNKNOWN_ERROR",r=`Ledger device: ${function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||n} (0x${e.toString(16)})`;if(super(r),this.name="TransportStatusError",this.statusCode=e,this.statusText=n,Object.setPrototypeOf(this,v.prototype),t&&e===I.LOCKED_DEVICE)return new N(r)}}class N extends v{constructor(e){super(I.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,N.prototype)}}a("TransportStatusError",(e=>new v(e.statusCode)));let m=0;const D=[],f=(e,t,n)=>{const r={type:e,id:String(++m),date:new Date};t&&(r.message=t),n&&(r.data=n),S(r)};class A{constructor(e,t){this.type=e,this.context=t}trace(e,t){(({type:e,message:t,data:n,context:r})=>{const o={type:e,id:String(++m),date:new Date};t&&(o.message=t),n&&(o.data=n),r&&(o.context=r),S(o)})({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new A(e,this.context)}withContext(e){return new A(this.type,e)}withUpdatedContext(e){return new A(this.type,Object.assign(Object.assign({},this.context),e))}}function S(e){for(let t=0;t<D.length;t++)try{D[t](e)}catch(e){console.error(e)}}"undefined"!=typeof window&&(window.__ledgerLogsListen=e=>(D.push(e),()=>{const t=D.indexOf(e);-1!==t&&(D[t]=D[D.length-1],D.pop())}));var O=n(48287).Buffer,_=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class C{constructor({context:e,logType:t}={}){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(o()),this.send=(e,t,n,r,o=O.alloc(0),i=[I.OK],{abortTimeoutMs:s}={})=>_(this,void 0,void 0,(function*(){const a=this.tracer.withUpdatedContext({function:"send"});if(o.length>=256)throw a.trace("data.length exceeded 256 bytes limit",{dataLength:o.length}),new T("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");a.trace("Starting an exchange",{abortTimeoutMs:s});const c=yield this.exchange(O.concat([O.from([e,t,n,r]),O.from([o.length]),o]),{abortTimeoutMs:s});a.trace("Received response from exchange");const d=c.readUInt16BE(c.length-2);if(!i.some((e=>e===d)))throw new v(d);return c})),this._appAPIlock=null,this.tracer=new A(null!=t?t:"transport",e)}exchange(e,{abortTimeoutMs:t}={}){throw new Error("exchange not implemented")}exchangeBulk(e,t){let n=!1;return(()=>_(this,void 0,void 0,(function*(){if(!n)for(const r of e){const e=yield this.exchange(r);if(n)return;const o=e.readUInt16BE(e.length-2);if(o!==I.OK)throw new v(o);t.next(e)}})))().then((()=>!n&&t.complete()),(e=>!n&&t.error(e))),{unsubscribe:()=>{n=!0}}}setScrambleKey(e){}close(){return Promise.resolve()}on(e,t){this._events.on(e,t)}off(e,t){this._events.removeListener(e,t)}emit(e,...t){this._events.emit(e,...t)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,t){return new Promise(((n,r)=>{let o=!1;const i=this.listen({next:t=>{o=!0,i&&i.unsubscribe(),s&&clearTimeout(s),this.open(t.descriptor,e).then(n,r)},error:e=>{s&&clearTimeout(s),r(e)},complete:()=>{s&&clearTimeout(s),o||r(new T(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),s=t?setTimeout((()=>{i.unsubscribe(),r(new T(this.ErrorMessage_ListenTimeout,"ListenTimeout"))}),t):null}))}exchangeAtomicImpl(e){return _(this,void 0,void 0,(function*(){const t=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw t.trace("Atomic exchange is already busy"),new p("An action was already pending on the Ledger device. Please deny or reconnect.");let n;const r=new Promise((e=>{n=e}));this.exchangeBusyPromise=r;let o=!1;const i=setTimeout((()=>{t.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),o=!0,this.emit("unresponsive")}),this.unresponsiveTimeout);try{const n=yield e();return o&&(t.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),n}finally{t.trace("Finalize, clearing busy guard"),clearTimeout(i),n&&n(),this.exchangeBusyPromise=null}}))}decorateAppAPIMethods(e,t,n){for(const r of t)e[r]=this.decorateAppAPIMethod(r,e[r],e,n)}decorateAppAPIMethod(e,t,n,r){return(...o)=>_(this,void 0,void 0,(function*(){const{_appAPIlock:i}=this;if(i)return Promise.reject(new T("Ledger Device is busy (lock "+i+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(r),yield t.apply(n,o)}finally{this._appAPIlock=null}}))}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}}C.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",C.ErrorMessage_NoDeviceFound="No Ledger device found";const w=C,U={},y={},R=(e,t)=>{y[e]=t},L=e=>{class t extends Error{constructor(n,r,o){if(super(n||e,o),Object.setPrototypeOf(this,t.prototype),this.name=e,r)for(const e in r)this[e]=r[e];if(o&&"object"==typeof o&&"cause"in o&&!("cause"in this)){const e=o.cause;this.cause=e,"stack"in e&&(this.stack=this.stack+"\nCAUSE: "+e.stack)}}}return U[e]=t,t};var P;L("AccountNameRequired"),L("AccountNotSupported"),L("AmountRequired"),L("BluetoothRequired"),L("BtcUnmatchedApp"),L("CantOpenDevice"),L("CashAddrNotSupported"),L("ClaimRewardsFeesWarning"),L("CurrencyNotSupported"),L("DeviceAppVerifyNotSupported"),L("DeviceGenuineSocketEarlyClose"),L("DeviceNotGenuine"),L("DeviceOnDashboardExpected"),L("DeviceOnDashboardUnexpected"),L("DeviceInOSUExpected"),L("DeviceHalted"),L("DeviceNameInvalid"),L("DeviceSocketFail"),L("DeviceSocketNoBulkStatus"),L("DeviceSocketNoBulkStatus"),L("UnresponsiveDeviceError"),L("DisconnectedDevice"),L("DisconnectedDeviceDuringOperation"),L("DeviceExtractOnboardingStateError"),L("DeviceOnboardingStatePollingError"),L("EnpointConfig"),L("EthAppPleaseEnableContractData"),L("FeeEstimationFailed"),L("FirmwareNotRecognized"),L("HardResetFail"),L("InvalidXRPTag"),L("InvalidAddress"),L("InvalidNonce"),L("InvalidAddressBecauseDestinationIsAlsoSource"),L("LatestMCUInstalledError"),L("UnknownMCU"),L("LedgerAPIError"),L("LedgerAPIErrorWithMessage"),L("LedgerAPINotAvailable"),L("ManagerAppAlreadyInstalled"),L("ManagerAppRelyOnBTC"),L("ManagerAppDepInstallRequired"),L("ManagerAppDepUninstallRequired"),L("ManagerDeviceLocked"),L("ManagerFirmwareNotEnoughSpace"),L("ManagerNotEnoughSpace"),L("ManagerUninstallBTCDep"),L("NetworkDown"),L("NetworkError"),L("NoAddressesFound"),L("NotEnoughBalance"),L("NotEnoughBalanceToDelegate"),L("NotEnoughBalanceInParentAccount"),L("NotEnoughSpendableBalance"),L("NotEnoughBalanceBecauseDestinationNotCreated"),L("NoAccessToCamera"),L("NotEnoughGas"),L("NotEnoughGasSwap"),L("NotSupportedLegacyAddress"),L("GasLessThanEstimate"),L("PriorityFeeTooLow"),L("PriorityFeeTooHigh"),L("PriorityFeeHigherThanMaxFee"),L("MaxFeeTooLow"),L("PasswordsDontMatch"),L("PasswordIncorrect"),L("RecommendSubAccountsToEmpty"),L("RecommendUndelegation"),L("TimeoutTagged"),L("UnexpectedBootloader"),L("MCUNotGenuineToDashboard"),L("RecipientRequired"),L("UnavailableTezosOriginatedAccountReceive"),L("UnavailableTezosOriginatedAccountSend"),L("UpdateFetchFileFail"),L("UpdateIncorrectHash"),L("UpdateIncorrectSig"),L("UpdateYourApp"),L("UserRefusedDeviceNameChange"),L("UserRefusedAddress"),L("UserRefusedFirmwareUpdate"),L("UserRefusedAllowManager"),L("UserRefusedOnDevice"),L("ExpertModeRequired"),L("TransportOpenUserCancelled"),L("TransportInterfaceNotAvailable"),L("TransportRaceCondition"),L("TransportWebUSBGestureRequired"),L("TransactionHasBeenValidatedError"),L("TransportExchangeTimeoutError"),L("DeviceShouldStayInApp"),L("WebsocketConnectionError"),L("WebsocketConnectionFailed"),L("WrongDeviceForAccount"),L("WrongAppForCurrency"),L("ETHAddressNonEIP"),L("CantScanQRCode"),L("FeeNotLoaded"),L("FeeNotLoadedSwap"),L("FeeRequired"),L("FeeTooHigh"),L("PendingOperation"),L("SyncError"),L("PairingFailed"),L("PeerRemovedPairing"),L("GenuineCheckFailed"),L("LedgerAPI4xx"),L("LedgerAPI5xx"),L("FirmwareOrAppUpdateRequired"),L("ReplacementTransactionUnderpriced"),L("OpReturnSizeLimit"),L("DustLimit"),L("LanguageNotFound"),L("NoDBPathGiven"),L("DBWrongPassword"),L("DBNotReset"),function(e){e.Unknown="Unknown",e.LocationServicesDisabled="LocationServicesDisabled",e.LocationServicesUnauthorized="LocationServicesUnauthorized",e.BluetoothScanStartFailed="BluetoothScanStartFailed"}(P||(P={})),Error;class M extends Error{constructor(e,t){const n="TransportError";super(e||n),this.name=n,this.message=e,this.stack=new Error(e).stack,this.id=t}}R("TransportError",(e=>new M(e.message,e.id)));const b={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};class F extends Error{constructor(e,{canBeMappedToChildError:t=!0}={}){const n=Object.keys(b).find((t=>b[t]===e))||"UNKNOWN_ERROR",r=`Ledger device: ${function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||n} (0x${e.toString(16)})`;if(super(r),this.name="TransportStatusError",this.statusCode=e,this.statusText=n,Object.setPrototypeOf(this,F.prototype),t&&e===b.LOCKED_DEVICE)return new x(r)}}class x extends F{constructor(e){super(b.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,x.prototype)}}R("TransportStatusError",(e=>new F(e.statusCode)));var B=n(48287).Buffer;function k(e){const t=B.alloc(2);return t.writeUInt16BE(e,0),t}const G={data:B.alloc(0),dataLength:0,sequence:0};var H,q=n(99589),K=n.n(q);!function(e){e.blue="blue",e.nanoS="nanoS",e.nanoSP="nanoSP",e.nanoX="nanoX",e.stax="stax"}(H||(H={}));const V={[H.blue]:{id:H.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:e=>4096},[H.nanoS]:{id:H.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:e=>{var t;return K().lt(null!==(t=K().coerce(e))&&void 0!==t?t:"","2.0.0")?4096:2048}},[H.nanoSP]:{id:H.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1569792,masks:[856686592],getBlockSize:e=>32},[H.nanoX]:{id:H.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:e=>4096,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[H.stax]:{id:H.stax,productName:"Ledger Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1569792,masks:[857735168],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}},W=(H.blue,H.nanoS,H.nanoSP,H.nanoX,H.stax,Object.values(V)),z=e=>{const t=W.find((t=>t.legacyUsbProductId===e));if(t)return t;const n=e>>8;return W.find((e=>e.productIdMM===n))},j=[],Y={};for(const e in V){const t=V[e],{bluetoothSpec:n}=t;if(n)for(let e=0;e<n.length;e++){const r=n[e];j.push(r.serviceUuid),Y[r.serviceUuid]=Y[r.serviceUuid.replace(/-/g,"")]=Object.assign({deviceModel:t},r)}}var X=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const $=[{vendorId:11415}];function J(){return X(this,void 0,void 0,(function*(){return yield navigator.usb.requestDevice({filters:$})}))}function Q(){return X(this,void 0,void 0,(function*(){return(yield navigator.usb.getDevices()).filter((e=>11415===e.vendorId))}))}var Z=n(48287).Buffer,ee=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class te extends w{constructor(e,t){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.device=e,this.interfaceNumber=t,this.deviceModel=z(e.productId)}static request(){return ee(this,void 0,void 0,(function*(){const e=yield J();return te.open(e)}))}static openConnected(){return ee(this,void 0,void 0,(function*(){const e=yield Q();return 0===e.length?null:te.open(e[0])}))}static open(e){return ee(this,void 0,void 0,(function*(){yield e.open(),null===e.configuration&&(yield e.selectConfiguration(1)),yield re(e);const t=e.configurations[0].interfaces.find((({alternates:e})=>e.some((e=>255===e.interfaceClass))));if(!t)throw new h("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=t.interfaceNumber;try{yield e.claimInterface(n)}catch(t){throw yield e.close(),new h(t.message)}const r=new te(e,n),o=t=>{e===t.device&&(navigator.usb.removeEventListener("disconnect",o),r._emitDisconnect(new d))};return navigator.usb.addEventListener("disconnect",o),r}))}close(){return ee(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield re(this.device),yield this.device.close()}))}exchange(e){return ee(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>ee(this,void 0,void 0,(function*(){const{channel:t,packetSize:n}=this;f("apdu","=> "+e.toString("hex"));const r=((e,t)=>({makeBlocks(n){let r=B.concat([k(n.length),n]);const o=t-5,i=Math.ceil(r.length/o);r=B.concat([r,B.alloc(i*o-r.length+1).fill(0)]);const s=[];for(let t=0;t<i;t++){const n=B.alloc(5);n.writeUInt16BE(e,0),n.writeUInt8(5,2),n.writeUInt16BE(t,3);const i=r.slice(t*o,(t+1)*o);s.push(B.concat([n,i]))}return s},reduceResponse(t,n){let{data:r,dataLength:o,sequence:i}=t||G;if(n.readUInt16BE(0)!==e)throw new M("Invalid channel","InvalidChannel");if(5!==n.readUInt8(2))throw new M("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==i)throw new M("Invalid sequence","InvalidSequence");t||(o=n.readUInt16BE(5)),i++;const s=n.slice(t?5:7);return r=B.concat([r,s]),r.length>o&&(r=r.slice(0,o)),{data:r,dataLength:o,sequence:i}},getReducedResult(e){if(e&&e.dataLength===e.data.length)return e.data}}))(t,n),o=r.makeBlocks(e);for(let e=0;e<o.length;e++)yield this.device.transferOut(3,o[e]);let i,s;for(;!(i=r.getReducedResult(s));){const e=yield this.device.transferIn(3,n),t=Z.from(e.data.buffer);s=r.reduceResponse(s,t)}return f("apdu","<= "+i.toString("hex")),i})))).catch((e=>{if(e&&e.message&&e.message.includes("disconnected"))throw this._emitDisconnect(e),new u(e.message);throw e}))}))}setScrambleKey(){}}te.isSupported=()=>Promise.resolve(!!navigator&&!!navigator.usb&&"function"==typeof navigator.usb.getDevices),te.list=Q,te.listen=e=>{let t=!1;return function(){return X(this,void 0,void 0,(function*(){const e=yield Q();return e.length>0?e[0]:J()}))}().then((n=>{if(!t){const t=z(n.productId);e.next({type:"add",descriptor:n,deviceModel:t}),e.complete()}}),(t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new g(t.message)):e.error(new l(t.message))})),{unsubscribe:function(){t=!0}}};const ne=te;function re(e){return ee(this,void 0,void 0,(function*(){try{yield e.reset()}catch(e){console.warn(e)}}))}}}]);
//# sourceMappingURL=vendor-wallets.eb9c939a791b36eb3afa.js.map